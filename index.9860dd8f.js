!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},a=n.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,n){o[e]=n},n.parcelRequired7c6=a),a("iE7OH").register(JSON.parse('{"9p9yL":"index.9860dd8f.js","2dPzb":"amazon.3c3f1cde.webp","82OGy":"amazon.b0a6f23c.png","glj45":"apple.78ef44cc.webp","cKFxX":"apple.34efda77.png","kLXsS":"bookshop.bf5b4137.webp","jA3cI":"bookshop.11f8a97b.png","pBFLm":"amazon-white.a48dbe32.png","cglxX":"amazon-white.1297bb22.webp","1OrD9":"books_322_@1.756abb35.webp","aTZT5":"books_322_@2.061cea98.webp","b2v3F":"books_322_@1.9d82d098.png","kdX8F":"books_322_@2.80ece8cf.png","anJen":"books_265_@1.88805d0a.webp","8Wzly":"books_265_@2.2708f99b.webp","dZopz":"books_265_@1.6c062fbc.png","9LOqr":"books_265_@2.28750540.png","bBRCa":"shopping-list.04b6b305.js"}'));var r=a("bpxeT"),c=a("2TvXO"),i=a("hrrt1");var s;r=a("bpxeT"),c=a("2TvXO");s=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("2dPzb");var l;l=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("82OGy");var u;u=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("glj45");var d;d=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("cKFxX");var p;p=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("kLXsS");var f;f=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("jA3cI");var m;m=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("pBFLm");var v;v=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("cglxX");var g=a("4LMMA"),b=a("6JpON"),h=(i=a("hrrt1"),a("i9Oqj")),y=a("d8SCu"),k=new(0,i.SwaggerAPI),L=document.querySelector(".backdrop"),_=document.querySelector(".modal-close-btn"),w=document.querySelector(".modal-btn"),H=document.querySelector(".modal-info"),x=document.querySelector(".modal-book"),E=document.querySelector("#progress"),S=e(l),R=e(s),B={};function A(){document.querySelectorAll(".book-link").forEach((function(e){return e.addEventListener("click",O)}))}function O(e){return N.apply(this,arguments)}function N(){return(N=e(r)(e(c).mark((function n(t){var o;return e(c).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.next=3,g.default.load("theme");case 3:return n.sent?(S=e(m),R=e(v)):(S=e(l),R=e(s)),document.body.style.overflow="hidden",E.classList.add("is-hidden"),L.classList.toggle("is-hidden"),L.addEventListener("click",z),window.addEventListener("keydown",j),_.addEventListener("click",M),n.prev=11,k.bookId=t.currentTarget.dataset.id,n.next=15,k.fetchBookById();case 15:o=n.sent,U(B=o.data),setTimeout((function(){C(B)}),0),w.addEventListener("click",F),n.next=25;break;case 22:n.prev=22,n.t0=n.catch(11),b.Notify.failure("Oops! Something went wrong. We are sorry for the inconvenience. Please try again later.");case 25:case"end":return n.stop()}}),n,null,[[11,22]])})))).apply(this,arguments)}function C(e){return T.apply(this,arguments)}function T(){return(T=e(r)(e(c).mark((function n(t){var o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.default.load("bookList");case 2:if((o=e.sent)&&0!==o.length){e.next=6;break}return q(),e.abrupt("return");case 6:o.find((function(e){return e.title===t.title}))?J():q();case 8:case"end":return e.stop()}}),n)})))).apply(this,arguments)}function F(){var e=g.default.load("bookList"),n=document.querySelector(".modal-book-name").textContent;"add to shopping list"===w.textContent?(g.default.addBookToStorage(B),b.Notify.info("The book has been added to your shopping cart."),J(),(0,h.countBook)()):(e.forEach((function(e,t,o){if(e.title===n)return o.splice(t,1)})),g.default.save("bookList",e),0===e.length&&g.default.remove("bookList"),(0,h.countBook)(),q(),b.Notify.info("The book has been removed from your shopping cart.")),(0,y.updateDatabase)()}function q(){w.textContent="add to shopping list",H.style.display="none"}function J(){w.textContent="remove from the shopping list",H.style.display="block"}function U(n){var t='<img\nclass="modal-img"\nsrc='.concat(n.book_image,'\nalt="Book cover"\n/>\n<div class="modal-info-container">\n<p class="modal-book-name">').concat(n.title,'</p>\n<p class="modal-book-author">').concat(n.author,'</p>\n<p class="modal-list-name is-hidden">').concat(n.list_name,'</p>\n<p class="modal-book-desc">').concat(n.description?n.description:"We are pleased to inform you that all information about this book you can found on partner resources (such as Amazon, etc.)",'\n</p>\n<div class="modal-icons-container">\n  <a href="').concat(n.buy_links[0].url,'" target="_blank" rel="noopener noreferrer" aria-label="Amazon"\n    ><picture class="modal-icon">\n      <source\n        srcset="').concat(R,'"\n        type="image/webp"\n      />\n      <source\n        srcset="').concat(S,'"\n        type="image/png"\n      />\n      <img\n        src="').concat(S,'"\n        alt="Amazon"\n      /> </picture\n  ></a>\n  <a href="').concat(n.buy_links[1].url,'" target="_blank" rel="noopener noreferrer" aria-label="Apple Books"\n    ><picture class="modal-icon">\n      <source\n        srcset="').concat(e(u),'"\n        type="image/webp"\n      />\n      <source\n        srcset="').concat(e(d),'"\n        type="image/png"\n      />\n      <img\n        src="').concat(e(d),'"\n        alt="Apple Books"\n      /> </picture\n  ></a>\n  <a href="').concat(n.buy_links[4].url,'" target="_blank" rel="noopener noreferrer" aria-label="Bookshop"\n    ><picture class="modal-icon">\n      <source\n        srcset="').concat(e(p),'"\n        type="image/webp"\n      />\n      <source\n        srcset="').concat(e(f),'"\n        type="image/png"\n      />\n      <img\n        src="').concat(e(f),'"\n        alt="Bookshop"\n      /></picture\n  ></a>\n</div>\n</div>');x.innerHTML=t}function j(e){"Escape"===e.key&&M()}function z(e){e.target===L&&M()}function M(){L.classList.toggle("is-hidden"),document.body.style.overflow="visible",E.classList.remove("is-hidden"),L.removeEventListener("click",z),window.removeEventListener("keydown",j),_.removeEventListener("click",M)}var X;X=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("1OrD9");var P;P=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("aTZT5");var I;I=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("b2v3F");var D;D=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("kdX8F");var W;W=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("anJen");var Z;Z=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("8Wzly");var G;G=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("dZopz");var K;function Q(){return'\n    <p class="shopping-list-text">Sorry. Could not find books of this category.</p>\n        <picture>\n            <source media="(min-width: 768px)" srcset="\n                            '.concat(e(X)," 1x,\n                            ").concat(e(P),' 2x\n                            " type="image/webp" />\n            <source media="(min-width: 768px)" srcset="\n                            ').concat(e(I)," 1x,\n                            ").concat(e(D),' 2x\n                            " type="image/png" />\n\n            <source media="(max-width: 767px)" srcset="\n                            ').concat(e(W)," 1x,\n                            ").concat(e(Z),' 2x\n                            " type="image/webp" />\n            <source media="(max-width: 767px)" srcset="\n                            ').concat(e(G)," 1x,\n                            ").concat(e(K),' 2x\n                            " type="image/png" />\n\n            <img class="shopping-list-image" src="').concat(e(W),'" alt="Books" loading="lazy" />\n        </picture>\n    ')}K=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("9LOqr");var V,Y=document.querySelector(".aside-list"),$=document.querySelector(".aside-title"),ee=document.querySelector(".main-content"),ne=document.querySelector(".click-loader"),te=new(0,i.SwaggerAPI),oe=(V=e(r)(e(c).mark((function n(){var t,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.fetchBooksCategoryList();case 3:t=e.sent.data,o=t.map((function(e){return'<li class="aside-item"><a class="aside-link"  aria-label="'.concat(e.list_name,'">').concat(e.list_name,"</a></li>")})).join(""),Y.innerHTML=o,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),n,null,[[0,8]])}))),function(){return V.apply(this,arguments)});oe();var ae=null;Y.addEventListener("click",(function(n){if("A"===n.target.nodeName){var t=n.target.textContent;te.categoryName=t,ae&&ae.classList.remove("active"),(ae=n.target).classList.add("active"),$.classList.remove("active");var o=function(){var n=e(r)(e(c).mark((function n(){return e(c).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:ne.classList.remove("click-is-hidden");try{setTimeout(e(r)(e(c).mark((function n(){var o,a,r,i,s,l;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.fetchBooksByCategory(t);case 2:if(0!==(o=e.sent.data).length){e.next=6;break}return ee.innerHTML=Q(),e.abrupt("return");case 6:a=o[0].list_name,r=a.split(" "),i=r[r.length-1],s=r.slice(0,r.length-1).join(" "),l="".concat(s,' <span class="categories-title-decor">').concat(i,"</span>"),ee.innerHTML='<h1 class="categories-title">'.concat(l,'</h1> <ul class="categories-item">').concat(o.map((function(e){var n=e.book_image,t=e.description,o=e.title,a=e.author,r=e._id;return'\n\n<li class="category-list-item">\n<a class="book-link" href="" data-id="'.concat(r,'" aria-label="').concat(o,'">\n<div class="book-thumb">\n<img class="book-image" src="').concat(n,'" alt="').concat(t,'" />\n<div class="book-overlay">\n<p class="book-overlay-text">quick view</p>\n</div>\n</div>\n<div class="book-card-content">\n<h2 class="book-title">').concat(o,'</h2>\n<p class="book-author">').concat(a,"</p>\n</div>\n</a>\n</li>")})).join(""),"</ul>"),A(),ee.scrollIntoView({behavior:"smooth"}),ne.classList.add("click-is-hidden");case 15:case"end":return e.stop()}}),n)}))),250)}catch(e){console.log(e)}case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();o()}})),a("71ZRj"),a("ekC86"),a("i8Q71");r=a("bpxeT"),c=a("2TvXO"),i=a("hrrt1"),b=a("6JpON");function re(e){return e.map((function(e){var n=e.book_image,t=e.description,o=e.title,a=e.author,r=e._id;return'<li class="books-list-item">\n                 <a class="book-link" href="" data-id="'.concat(r,'" aria-label="').concat(o,'">\n                    <div class="book-thumb">\n                      <img class="book-image" src="').concat(n,'" alt="').concat(t,'" />\n\n                        <div class="book-overlay">\n                       <p class="book-overlay-text">quick view</p>\n                       </div>\n                       </div>                     \n                     <div class="book-card-content">\n                     <h2 class="book-title">').concat(o,'</h2>\n                     <p class="book-author">').concat(a,"</p>\n                     </div>\n                 </a>                    \n              </li>")})).join("")}var ce=a("bNPWo"),ie=document.querySelector(".category-list"),se=document.querySelector(".home-title"),le=document.querySelector(".click-loader"),ue=document.querySelector(".main-content"),de=(0,ce.default)(),pe=new(0,i.SwaggerAPI);function fe(){return(fe=e(r)(e(c).mark((function n(){var t,o,a,r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){var n=(Math.random()*e).toFixed();return n=Number(n),o.includes(n)?o.length<e&&a(e):void o.push(n)},e.prev=1,e.next=4,pe.fetchTopBooks();case 4:for(t=e.sent.data,o=[],r=0;r<4;r++)a(17);o.forEach((function(e){var n=t[e].books,o=0;if(de<=767&&(o=1),de>=768&&de<1440&&(o=3),de>=1440&&(o=5),0!==n.length){var a='<li class="category-list-item top-list-item">\n        <p class="category-name" data-category-name="'.concat(n[0].list_name,'">').concat(n[0].list_name,'</p>\n        <ul class="books-list">\n          ').concat(re(n.slice(0,o)),'\n        </ul>\n       <button class="category-list-button">see more</button>  \n      </li>');ie.insertAdjacentHTML("beforeend",a),me()}else b.Notify.failure("There are no best sellers books in this category")})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),b.Notify.failure("Something went wrong. Please, try later.");case 14:A();case 15:case"end":return e.stop()}}),n,null,[[1,11]])})))).apply(this,arguments)}function me(){document.querySelectorAll(".category-list-button").forEach((function(e){e.addEventListener("click",ve)}))}function ve(e){return ge.apply(this,arguments)}function ge(){return(ge=e(r)(e(c).mark((function n(t){return e(c).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:le.classList.remove("click-is-hidden");try{setTimeout(e(r)(e(c).mark((function n(){var o,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.target.previousElementSibling.previousElementSibling.textContent,pe.categoryName=o,e.next=4,pe.fetchBooksByCategory();case 4:if(0!==(a=e.sent.data).length){e.next=8;break}return ie.innerHTML=Q(),e.abrupt("return");case 8:se.innerHTML=be(o),ie.classList.add("category-list-click"),ie.innerHTML=re(a),he(o),A(),ue.scrollIntoView({behavior:"smooth"}),le.classList.add("click-is-hidden");case 15:case"end":return e.stop()}}),n)}))),250)}catch(e){b.Notify.failure("Something went wrong. Please, try later.")}case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function be(e){var n=e.split(" "),t=n[n.length-1],o=n.slice(0,n.length-1).join(" ");return'<span class="home-title-decor">'.concat(o," </span>").concat(t)}function he(e){var n=document.querySelectorAll(".aside-item"),t=document.querySelector(".aside-title");n.forEach((function(n){e===n.textContent&&(t.classList.toggle("active"),n.classList.toggle("active"))}))}!function(){fe.apply(this,arguments)}(),a("b3EoS"),a("etUX2"),a("iPy5Q"),a("iohcl")}();
//# sourceMappingURL=index.9860dd8f.js.map
